openapi: 3.0.3
info:
  title: MeteringPoint
  version: 0.3.0
  description: API to create, read, and update meter information.
tags:
  - name: MeteringPoint
    description: API to create, read, and update agreements.
paths:
  /api/v1/meter/search:
    post:
      tags:
        - MeteringPoint
      operationId: get-metering-point
      summary: Find a meter by attributes
      security:
        - JWTAuth: [ ]
      parameters:
        - in: header
          name: x-document-date-time
          description: Document creation timestamp
          required: true
          schema:
            $ref: '#/components/schemas/dateTime'
        - in: header
          name: x-document-identification
          description: Document unique identification
          required: true
          schema:
            $ref: '#/components/schemas/uniqueId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marketParticipantContext:
                  $ref: '#/components/schemas/marketParticipantContext'
                meterAttributes:
                  $ref: '#/components/schemas/meterAttributes'
                pagination:
                  $ref: '#/components/schemas/pagingRequest'
              required:
                - marketParticipantContext
                - meterAttributes
      description: >-
        Submit the meter identification to receive the meter metadata. The following validation needs to be implemented manually. At least one of the
        meterAttributes properties are required in the request.
      responses:
        '200':
          description: OK
          headers:
            status:
              description: HTTP status code
              schema:
                $ref: '#/components/schemas/statusCode'
            x-document-date-time:
              description: Document creation timestamp
              schema:
                $ref: '#/components/schemas/dateTime'
            x-document-identification:
              description: Document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
            x-original-document-identification:
              description: Request document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
          content:
            application/json:
              schema:
                type: object
                properties:
                  meterMetadata:
                    type: array
                    minItems: 1
                    items:
                      $ref: '#/components/schemas/meterMetadataResponse'
                  pagination:
                    $ref: '#/components/schemas/pagingResponse'
                required:
                  - meterMetadata
                  - pagination
        "400":
          $ref: '#/components/responses/badRequest'
        "401":
          $ref: '#/components/responses/unauthorized'
        "403":
          $ref: '#/components/responses/forbidden'
        "404":
          $ref: '#/components/responses/notFound'
        "422":
          $ref: '#/components/responses/unprocessableEntity'
  /api/v1/meter/search/border:
    post:
      tags:
        - MeteringPoint
      operationId: get-border-metering-points-by-customer
      summary: Get a border metering points by customer
      security:
        - JWTAuth: [ ]
      parameters:
        - in: header
          name: x-document-date-time
          description: Document creation timestamp
          required: true
          schema:
            $ref: '#/components/schemas/dateTime'
        - in: header
          name: x-document-identification
          description: Document unique identification
          required: true
          schema:
            $ref: '#/components/schemas/uniqueId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marketParticipantContext:
                  $ref: '#/components/schemas/marketParticipantContext'
                customerEic:
                  $ref: '#/components/schemas/eic'
              required:
                - marketParticipantContext
                - customerEic
      description: >-
        Submit the customer identification and the commodity type to receive border metering points
      responses:
        '200':
          description: OK
          headers:
            status:
              description: HTTP status code
              schema:
                $ref: '#/components/schemas/statusCode'
            x-document-date-time:
              description: Document creation timestamp
              schema:
                $ref: '#/components/schemas/dateTime'
            x-document-identification:
              description: Document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
            x-original-document-identification:
              description: Request document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
          content:
            application/json:
              schema:
                type: object
                properties:
                  meteringPoints:
                    type: array
                    minItems: 1
                    items:
                      $ref: '#/components/schemas/meteringPoint'
        "400":
          $ref: '#/components/responses/badRequest'
        "401":
          $ref: '#/components/responses/unauthorized'
        "403":
          $ref: '#/components/responses/forbidden'
        "404":
          $ref: '#/components/responses/notFound'
        "422":
          $ref: '#/components/responses/unprocessableEntity'
  /api/v1/meter/export:
    post:
      tags:
        - MeteringPoint
      operationId: export-meter
      summary: Export meter by attributes
      security:
        - JWTAuth: [ ]
      parameters:
        - in: header
          name: x-document-date-time
          description: Document creation timestamp
          required: true
          schema:
            $ref: '#/components/schemas/dateTime'
        - in: header
          name: x-document-identification
          description: Document unique identification
          required: true
          schema:
            $ref: '#/components/schemas/uniqueId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marketParticipantContext:
                  $ref: '#/components/schemas/marketParticipantContext'
                meterAttributes:
                  $ref: '#/components/schemas/meterAttributes'
                pagination:
                  $ref: '#/components/schemas/pagingRequest'
              required:
                - marketParticipantContext
                - meterAttributes
      description: >-
        Submit the meter identification to receive the meter metadata. The following validation needs to be implemented manually. At least one of the
        meterAttributes properties are required in the request.
      responses:
        '200':
          description: OK
          headers:
            status:
              description: HTTP status code
              schema:
                $ref: '#/components/schemas/statusCode'
            x-document-date-time:
              description: Document creation timestamp
              schema:
                $ref: '#/components/schemas/dateTime'
            x-document-identification:
              description: Document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
            x-original-document-identification:
              description: Request document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
          content:
            application/octet-stream:
              schema:
                # a binary file of any type
                type: string
                format: binary
        "400":
          $ref: '#/components/responses/badRequest'
        "401":
          $ref: '#/components/responses/unauthorized'
        "403":
          $ref: '#/components/responses/forbidden'
        "404":
          $ref: '#/components/responses/notFound'
        "422":
          $ref: '#/components/responses/unprocessableEntity'
  /api/v1/meter:
    post:
      tags:
        - MeteringPoint
      operationId: create-metering-point
      summary: Create meter with metadata
      security:
        - JWTAuth: [ ]
      parameters:
        - in: header
          name: x-document-date-time
          description: Document creation timestamp
          required: true
          schema:
            $ref: '#/components/schemas/dateTime'
        - in: header
          name: x-document-identification
          description: Document unique identification
          required: true
          schema:
            $ref: '#/components/schemas/uniqueId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marketParticipantContext:
                  $ref: '#/components/schemas/marketParticipantContext'
                meterMetadata:
                  $ref: '#/components/schemas/createMeteringPointMetadata'
              required:
                - marketParticipantContext
                - meterMetadata
        description: >-
          Submit the meter metadata object to create the meter.
          All of the following meterMetadata properties are required in the request:
            - location
            - meterCommon
          The following validation needs to be implemented manually. Exactly one of the meterMetadata properties are required in the request:
            - electricityCharacteristics
            - naturalGasCharacteristics
            - aggregatorCharacteristics
      responses:
        '201':
          description: Created
          headers:
            status:
              description: HTTP status code
              schema:
                $ref: '#/components/schemas/statusCode'
            x-document-date-time:
              description: Document creation timestamp
              schema:
                $ref: '#/components/schemas/dateTime'
            x-document-identification:
              description: Document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
            x-original-document-identification:
              description: Request document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/meteringPointEntityResponse'
        "400":
          $ref: '#/components/responses/badRequest'
        "401":
          $ref: '#/components/responses/unauthorized'
        "403":
          $ref: '#/components/responses/forbidden'
        "422":
          $ref: '#/components/responses/unprocessableEntity'
    put:
      tags:
        - MeteringPoint
      operationId: update-metering-point
      summary: Update meter metadata
      security:
        - JWTAuth: [ ]
      parameters:
        - in: header
          name: x-document-date-time
          description: Document creation timestamp
          required: true
          schema:
            $ref: '#/components/schemas/dateTime'
        - in: header
          name: x-document-identification
          description: Document unique identification
          required: true
          schema:
            $ref: '#/components/schemas/uniqueId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marketParticipantContext:
                  $ref: '#/components/schemas/marketParticipantContext'
                meterMetadata:
                  $ref: '#/components/schemas/updateMeterMetadata'
              required:
                - marketParticipantContext
                - meterMetadata
        description: >-
          Submit the meter metadata object to update its metadata.
          All of the following meterMetadata properties are required in the request:
            - location
            - meterCommon
          The following validation needs to be implemented manually. Exactly one of the meterMetadata properties are required in the request:
            - electricityCharacteristics
            - naturalGasCharacteristics
            - aggregatorCharacteristics
      responses:
        '200':
          description: OK
          headers:
            status:
              description: HTTP status code
              schema:
                $ref: '#/components/schemas/statusCode'
            x-document-date-time:
              description: Document creation timestamp
              schema:
                $ref: '#/components/schemas/dateTime'
            x-document-identification:
              description: Document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
            x-original-document-identification:
              description: Request document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/meteringPointEntityResponse'
        "400":
          $ref: '#/components/responses/badRequest'
        "401":
          $ref: '#/components/responses/unauthorized'
        "403":
          $ref: '#/components/responses/forbidden'
        "404":
          $ref: '#/components/responses/notFound'
        "422":
          $ref: '#/components/responses/unprocessableEntity'
  /api/v1/meter/search/customer:
    post:
      tags:
        - MeteringPoint
      operationId: get-metering-points-by-customer
      summary: Find a meter by Customer EIC
      security:
        - JWTAuth: [ ]
      parameters:
        - in: header
          name: x-document-date-time
          description: Document creation timestamp
          required: true
          schema:
            $ref: '#/components/schemas/dateTime'
        - in: header
          name: x-document-identification
          description: Document unique identification
          required: true
          schema:
            $ref: '#/components/schemas/uniqueId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marketParticipantContext:
                  $ref: '#/components/schemas/marketParticipantContext'
                customerEic:
                  type: array
                  minItems: 1
                  items:
                    $ref: '#/components/schemas/eic'
              required:
                - marketParticipantContext
                - customerEic
      description: >-
        Submit the customer identification and optionally the commodity type to receive the meter metadata
      responses:
        '200':
          description: OK
          headers:
            status:
              description: HTTP status code
              schema:
                $ref: '#/components/schemas/statusCode'
            x-document-date-time:
              description: Document creation timestamp
              schema:
                $ref: '#/components/schemas/dateTime'
            x-document-identification:
              description: Document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
            x-original-document-identification:
              description: Request document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
          content:
            application/json:
              schema:
                type: object
                properties:
                  customerEic:
                    type: array
                    minItems: 1
                    items:
                      $ref: '#/components/schemas/eic'
                  meteringPoints:
                    type: array
                    minItems: 1
                    items:
                      $ref: '#/components/schemas/meterMetadataResponse'
        "400":
          $ref: '#/components/responses/badRequest'
        "401":
          $ref: '#/components/responses/unauthorized'
        "403":
          $ref: '#/components/responses/forbidden'
        "404":
          $ref: '#/components/responses/notFound'
        "422":
          $ref: '#/components/responses/unprocessableEntity'
  /api/v1/meter/change:
    post:
      tags:
        - MeteringPoint
      operationId: get-meter-changes
      summary: Return metering points that were created or updated after the marked point in time - NOT IMPLEMENTED
      security:
        - JWTAuth: [ ]
      parameters:
        - in: header
          name: x-document-date-time
          description: Document creation timestamp
          required: true
          schema:
            $ref: '#/components/schemas/dateTime'
        - in: header
          name: x-document-identification
          description: Document unique identification
          required: true
          schema:
            $ref: '#/components/schemas/uniqueId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                marketParticipantContext:
                  $ref: '#/components/schemas/marketParticipantContext'
                updatePeriodStart:
                  $ref: '#/components/schemas/dateTime'
                pagination:
                  $ref: '#/components/schemas/pagingRequest'
              required:
                - marketParticipantContext
                - updatePeriodStart
                - pagination
      responses:
        '200':
          description: OK
          headers:
            status:
              description: HTTP status code
              schema:
                $ref: '#/components/schemas/statusCode'
            x-document-date-time:
              description: Document creation timestamp
              schema:
                $ref: '#/components/schemas/dateTime'
            x-document-identification:
              description: Document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
            x-original-document-identification:
              description: Request document unique identification
              schema:
                $ref: '#/components/schemas/uniqueId'
          content:
            application/json:
              schema:
                type: object
                properties:
                  meterMetadata:
                    type: array
                    minItems: 1
                    items:
                      $ref: '#/components/schemas/meterMetadataResponse'
                  pagination:
                    $ref: '#/components/schemas/pagingResponse'
                required:
                  - meterMetadata
                  - pagination
        "400":
          $ref: '#/components/responses/badRequest'
        "401":
          $ref: '#/components/responses/unauthorized'
        "403":
          $ref: '#/components/responses/forbidden'
        "404":
          $ref: '#/components/responses/notFound'
        "422":
          $ref: '#/components/responses/unprocessableEntity'
components:
  securitySchemes:
    JWTAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |-
        Example:
        > Authorization: Bearer <token>
  schemas:
    dateTime:
      type: string
      format: date-time
      description: ISO 8601 zone datetime
    uniqueId:
      type: string
      format: uuid
      description: UUID
    statusCode:
      type: integer
      description: HTTP status code
    eic:
      type: string
      format: eic
      description: EIC code
      minLength: 16
      maxLength: 16
      # RegEx to verify the EIC format, semantic verification is part of content validation
      pattern: >-
        \d{2}[XYZWTVA][A-Z0-9\-]{12}[A-Z0-9]
    commodityType:
      type: string
      enum: [ ELECTRICITY, NATURAL_GAS ]
    serviceProviderRole:
      type: string
      enum: [ OPEN_SUPPLIER, GRID_OPERATOR, LINE_OPERATOR, CLOSED_DISTRIBUTION_NETWORK, PRODUCER_OPERATOR, CHARGING_POINT_OPERATOR, AGGREGATOR, ENERGY_SERVICE_PROVIDER ]
    meteringType:
      type: string
      enum: [ REMOTE_READING, VIRTUAL, NON_REMOTE_READING ]
    meteringPointType:
      type: string
      enum: [ BORDER, AGGREGATION, REGULAR, INTERNAL ]
    sourceType:
      type: string
      enum: [ AGREEMENT, PERMISSION, OWNERSHIP, BALANCE_STATE ]
    consumptionScale:
      type: string
      enum: [ SMALL, LARGE ]
    connectionState:
      type: string
      enum: [ CONNECTED, DISCONNECTED ]
    resolutionElectricity:
      type: string
      enum: [ PT15M, PT1H ]
    resolutionGas:
      type: string
      enum: [ PT1H, P1D ]
    customerTypeElectricity:
      type: string
      enum: [ CONSUMER, GRID_OPERATOR, PRODUCER, MICRO, LINE_OPERATOR, ENERGY_STORAGE_UNIT, CHARGING_POINT_OPERATOR ]
    customerTypeGas:
      type: string
      enum: [ CONSUMER, CONSUMER_2, GRID_OPERATOR, PRODUCER, PROTECTED, PROTECTED_OTHER, GENERAL_INTEREST_SERVICE_PROVIDER, POWER_PRODUCER_FROM_GAS, LNG_OPERATOR ]
    production:
      type: boolean
    productionSourceElectricity:
      type: string
      enum: [ SOLAR, WIND, HYDRO, BIOGAS, BIOMASS, NATURAL_GAS, OIL_SHALE, OTHER_RENEWABLE, OTHER_NON_RENEWABLE ]
    productionSourceGas:
      type: string
      enum: [ BIOGAS ]
    coordinateSystem:
      type: string
      enum: [ WGS84, LEST97 ]
    transmissionNetworkEic:
      $ref: '#/components/schemas/eic'
    apartmentAssociation:
      type: boolean
    isolatedMeteringPoint:
      type: boolean
    electricalHeating:
      type: boolean
    chargingPoint:
      type: boolean
    filterValue:
      type: number
      minimum: 0
      multipleOf: 0.01
    filterType:
      type: string
      enum: [ EQUALS, GREATER_THAN, LESS_THAN, GREATER_THAN_OR_EQUALS, LESS_THAN_OR_EQUALS ]
    doubleFilter:
      type: object
      properties:
        filterValue:
          $ref: '#/components/schemas/filterValue'
        filterType:
          $ref: '#/components/schemas/filterType'
      required:
        - filterValue
        - filterType
    storageCapacity:
      type: number
      minimum: 0
      multipleOf: 0.01
    storageEnergy:
      type: number
      minimum: 0
      multipleOf: 0.01
    productionCapacity:
      type: number
      minimum: 0
      multipleOf: 0.01
    transmissionCapacity:
      type: number
      minimum: 0
      multipleOf: 0.01
    meterCommon:
      type: object
      description: Common meter metadata
      properties:
        meterEic:
          $ref: '#/components/schemas/eic'
        meteringType:
          $ref: '#/components/schemas/meteringType'
        meteringPointType:
          $ref: '#/components/schemas/meteringPointType'
      required:
        - meterEic
        - meteringType
    meterCommonUpdate:
      type: object
      description: Common meter metadata
      properties:
        meterEic:
          $ref: '#/components/schemas/eic'
        meteringType:
          $ref: '#/components/schemas/meteringType'
      required:
        - meterEic
        - meteringType
    meterCommonAttributes:
      type: object
      description: >-
        Common meter metadata. The following validation needs to be implemented manually. If meterCommonAttributes is present in the
        request, then at least one of the meterCommonAttributes properties are required.
      properties:
        meterEic:
          $ref: '#/components/schemas/eic'
        commodityType:
          $ref: '#/components/schemas/commodityType'
        meteringType:
          $ref: '#/components/schemas/meteringType'
        meteringPointType:
          $ref: '#/components/schemas/meteringPointType'
        ownerMarketRole:
          $ref: '#/components/schemas/serviceProviderRole'
        sourceType:
          type: array
          items:
            $ref: '#/components/schemas/sourceType'
    meterCommonResponse:
      type: object
      description: Common meter metadata
      properties:
        meterEic:
          $ref: '#/components/schemas/eic'
        commodityType:
          $ref: '#/components/schemas/commodityType'
        meteringType:
          $ref: '#/components/schemas/meteringType'
        meteringPointType:
          $ref: '#/components/schemas/meteringPointType'
        sourceType:
          type: array
          items:
            $ref: '#/components/schemas/sourceType'
        version:
          type: integer
          minimum: 1
      required:
        - meterEic
        - commodityType
        - meteringType
        - meteringPointType
        - version
    getMeterMetadata:
      type: object
      description: Meter metadata object (full dataset).
      properties:
        meteringPoint:
          $ref: '#/components/schemas/meterCommonResponse'
        meterLocation:
          $ref: '#/components/schemas/meteringPointLocation'
        electricityCharacteristics:
          $ref: '#/components/schemas/electricityCharacteristics'
        naturalGasCharacteristics:
          $ref: '#/components/schemas/naturalGasCharacteristics'
        aggregatorCharacteristics:
          $ref: '#/components/schemas/aggregatorCharacteristics'
      required:
        - meteringPoint
        - meterLocation
    gridOperator:
      type: object
      description: Grid operator
      properties:
        gridOperatorName:
          type: string
        gridOperatorRole:
          $ref: '#/components/schemas/serviceProviderRole'
    meteringPointAttributes:
      type: object
      description: Common meter metadata after creating metering point
      properties:
        meterEic:
          $ref: '#/components/schemas/eic'
        commodityType:
          $ref: '#/components/schemas/commodityType'
        ownerExternalId:
          type: string
        ownerMarketRole:
          $ref: '#/components/schemas/serviceProviderRole'
        meteringType:
          $ref: '#/components/schemas/meteringType'
        meteringPointType:
          $ref: '#/components/schemas/meteringPointType'
        validFrom:
          $ref: '#/components/schemas/dateTime'
    electricityCharacteristics:
      type: object
      description: Electricity characteristics
      properties:
        consumptionScale:
          $ref: '#/components/schemas/consumptionScale'
        connectionState:
          $ref: '#/components/schemas/connectionState'
        resolution:
          $ref: '#/components/schemas/resolutionElectricity'
        customerType:
          $ref: '#/components/schemas/customerTypeElectricity'
        production:
          $ref: '#/components/schemas/production'
        productionSource:
          $ref: '#/components/schemas/productionSourceElectricity'
        transmissionNetworkEic:
          $ref: '#/components/schemas/transmissionNetworkEic'
        apartmentAssociation:
          $ref: '#/components/schemas/apartmentAssociation'
        isolatedMeteringPoint:
          $ref: '#/components/schemas/isolatedMeteringPoint'
        electricalHeating:
          $ref: '#/components/schemas/electricalHeating'
        chargingPoint:
          $ref: '#/components/schemas/chargingPoint'
        storageCapacity:
          $ref: '#/components/schemas/storageCapacity'
        storageEnergy:
          $ref: '#/components/schemas/storageEnergy'
        productionCapacity:
          $ref: '#/components/schemas/productionCapacity'
        transmissionCapacity:
          $ref: '#/components/schemas/transmissionCapacity'
    createElectricityCharacteristics:
      type: object
      description: Electricity characteristics
      properties:
        consumptionScale:
          $ref: '#/components/schemas/consumptionScale'
        connectionState:
          $ref: '#/components/schemas/connectionState'
        resolution:
          $ref: '#/components/schemas/resolutionElectricity'
        customerType:
          $ref: '#/components/schemas/customerTypeElectricity'
        production:
          $ref: '#/components/schemas/production'
        productionSource:
          $ref: '#/components/schemas/productionSourceElectricity'
        transmissionNetworkEic:
          $ref: '#/components/schemas/transmissionNetworkEic'
        apartmentAssociation:
          $ref: '#/components/schemas/apartmentAssociation'
        isolatedMeteringPoint:
          $ref: '#/components/schemas/isolatedMeteringPoint'
        electricalHeating:
          $ref: '#/components/schemas/electricalHeating'
        chargingPoint:
          $ref: '#/components/schemas/chargingPoint'
        storageCapacity:
          $ref: '#/components/schemas/storageCapacity'
        storageEnergy:
          $ref: '#/components/schemas/storageEnergy'
        productionCapacity:
          $ref: '#/components/schemas/productionCapacity'
        transmissionCapacity:
          $ref: '#/components/schemas/transmissionCapacity'
      required:
        - consumptionScale
        - connectionState
        - resolution
        - customerType
        - production
        - productionSource
        - transmissionNetworkEic
        - apartmentAssociation
        - isolatedMeteringPoint
        - electricalHeating
        - chargingPoint
    updateElectricityCharacteristics:
      type: object
      description: Electricity characteristics
      properties:
        consumptionScale:
          $ref: '#/components/schemas/consumptionScale'
        connectionState:
          $ref: '#/components/schemas/connectionState'
        resolution:
          $ref: '#/components/schemas/resolutionElectricity'
        customerType:
          $ref: '#/components/schemas/customerTypeElectricity'
        production:
          $ref: '#/components/schemas/production'
        productionSource:
          $ref: '#/components/schemas/productionSourceElectricity'
        transmissionNetworkEic:
          $ref: '#/components/schemas/transmissionNetworkEic'
        apartmentAssociation:
          $ref: '#/components/schemas/apartmentAssociation'
        isolatedMeteringPoint:
          $ref: '#/components/schemas/isolatedMeteringPoint'
        electricalHeating:
          $ref: '#/components/schemas/electricalHeating'
        chargingPoint:
          $ref: '#/components/schemas/chargingPoint'
        storageCapacity:
          $ref: '#/components/schemas/storageCapacity'
        storageEnergy:
          $ref: '#/components/schemas/storageEnergy'
        productionCapacity:
          $ref: '#/components/schemas/productionCapacity'
        transmissionCapacity:
          $ref: '#/components/schemas/transmissionCapacity'
    electricityCharacteristicsAttributes:
      type: object
      description: Electricity characteristics. The following validation needs to be implemented manually. If meterCommonAttributes is present in the
        request, then at least one of the electricityCharacteristicsAttributes properties are required.
      properties:
        consumptionScale:
          $ref: '#/components/schemas/consumptionScale'
        connectionState:
          $ref: '#/components/schemas/connectionState'
        resolution:
          $ref: '#/components/schemas/resolutionElectricity'
        customerType:
          $ref: '#/components/schemas/customerTypeElectricity'
        production:
          $ref: '#/components/schemas/production'
        productionSource:
          $ref: '#/components/schemas/productionSourceElectricity'
        transmissionNetworkEic:
          $ref: '#/components/schemas/transmissionNetworkEic'
        apartmentAssociation:
          $ref: '#/components/schemas/apartmentAssociation'
        isolatedMeteringPoint:
          $ref: '#/components/schemas/isolatedMeteringPoint'
        electricalHeating:
          $ref: '#/components/schemas/electricalHeating'
        chargingPoint:
          $ref: '#/components/schemas/chargingPoint'
        storageCapacity:
          $ref: '#/components/schemas/doubleFilter'
        storageEnergy:
          $ref: '#/components/schemas/doubleFilter'
        productionCapacity:
          $ref: '#/components/schemas/doubleFilter'
        transmissionCapacity:
          $ref: '#/components/schemas/doubleFilter'
    naturalGasCharacteristics:
      type: object
      description: Gas characteristics
      properties:
        consumptionScale:
          $ref: '#/components/schemas/consumptionScale'
        connectionState:
          $ref: '#/components/schemas/connectionState'
        resolution:
          $ref: '#/components/schemas/resolutionGas'
        customerType:
          $ref: '#/components/schemas/customerTypeGas'
        production:
          $ref: '#/components/schemas/production'
        productionSource:
          $ref: '#/components/schemas/productionSourceGas'
        transmissionNetworkEic:
          $ref: '#/components/schemas/transmissionNetworkEic'
        apartmentAssociation:
          $ref: '#/components/schemas/apartmentAssociation'
    createNaturalGasCharacteristics:
      type: object
      description: Gas characteristics
      properties:
        consumptionScale:
          $ref: '#/components/schemas/consumptionScale'
        connectionState:
          $ref: '#/components/schemas/connectionState'
        resolution:
          $ref: '#/components/schemas/resolutionGas'
        customerType:
          $ref: '#/components/schemas/customerTypeGas'
        production:
          $ref: '#/components/schemas/production'
        productionSource:
          $ref: '#/components/schemas/productionSourceGas'
        transmissionNetworkEic:
          $ref: '#/components/schemas/transmissionNetworkEic'
        apartmentAssociation:
          $ref: '#/components/schemas/apartmentAssociation'
      required:
        - consumptionScale
        - connectionState
        - resolution
        - customerType
        - production
        - productionSource
        - transmissionNetworkEic
        - apartmentAssociation
    updateNaturalGasCharacteristics:
      type: object
      description: Gas characteristics
      properties:
        consumptionScale:
          $ref: '#/components/schemas/consumptionScale'
        connectionState:
          $ref: '#/components/schemas/connectionState'
        resolution:
          $ref: '#/components/schemas/resolutionGas'
        customerType:
          $ref: '#/components/schemas/customerTypeGas'
        production:
          $ref: '#/components/schemas/production'
        productionSource:
          $ref: '#/components/schemas/productionSourceGas'
        transmissionNetworkEic:
          $ref: '#/components/schemas/transmissionNetworkEic'
        apartmentAssociation:
          $ref: '#/components/schemas/apartmentAssociation'
    gasCharacteristicsAttributes:
      type: object
      description: Gas characteristics. The following validation needs to be implemented manually. If meterCommonAttributes is present in the
        request, then at least one of the gasCharacteristicsAttributes properties are required.
      properties:
        consumptionScale:
          $ref: '#/components/schemas/consumptionScale'
        connectionState:
          $ref: '#/components/schemas/connectionState'
        resolution:
          $ref: '#/components/schemas/resolutionGas'
        customerType:
          $ref: '#/components/schemas/customerTypeGas'
        production:
          $ref: '#/components/schemas/production'
        productionSource:
          $ref: '#/components/schemas/productionSourceGas'
        transmissionNetworkEic:
          $ref: '#/components/schemas/transmissionNetworkEic'
        apartmentAssociation:
          $ref: '#/components/schemas/apartmentAssociation'
    aggregatorCharacteristics:
      type: object
      description: Aggregator characteristics
      properties:
        parentMeterEic:
          $ref: '#/components/schemas/eic'
    createAggregatorCharacteristics:
      type: object
      description: Aggregator characteristics
      properties:
        parentMeterEic:
          $ref: '#/components/schemas/eic'
      required:
        - parentMeterEic
    updateAggregatorCharacteristics:
      type: object
      description: Aggregator characteristics
      properties:
        parentMeterEic:
          $ref: '#/components/schemas/eic'
    aggregatorCharacteristicsAttributes:
      type: object
      description: Aggregator characteristics. The following validation needs to be implemented manually. If meterCommonAttributes is present in the
        request, then at least one of the aggregatorCharacteristicsAttributes properties are required.
      properties:
        parentMeterEic:
          $ref: '#/components/schemas/eic'
    meterLocation:
      type: object
      description: Location object
      properties:
        adrId:
          type: integer
        comment:
          type: string
          maxLength: 255
    meteringPointLocation:
      type: object
      description: Location object
      properties:
        adrId:
          type: integer
        comment:
          type: string
          maxLength: 255
        county:
          type: string
          maxLength: 255
        municipality:
          type: string
          maxLength: 255
        locality:
          type: string
          maxLength: 255
        streetAddress:
          type: string
          maxLength: 255
        postcode:
          type: string
          maxLength: 50
        coordinates:
          $ref: '#/components/schemas/coordinates'
    coordinates:
      type: object
      properties:
        coordinateSystem:
          $ref: '#/components/schemas/coordinateSystem'
        latitude:
          type: number
          format: double
          multipleOf: 0.00001
        longitude:
          type: number
          format: double
          multipleOf: 0.00001
    meterMetadata:
      type: object
      description: Meter metadata object (full dataset).
      properties:
        meteringPoint:
          $ref: '#/components/schemas/meterCommon'
        meterLocation:
          $ref: '#/components/schemas/meteringPointLocation'
        electricityCharacteristics:
          $ref: '#/components/schemas/electricityCharacteristicsAttributes'
        naturalGasCharacteristics:
          $ref: '#/components/schemas/gasCharacteristicsAttributes'
        aggregatorCharacteristics:
          $ref: '#/components/schemas/aggregatorCharacteristicsAttributes'
      required:
        - meteringPoint
    updateMeterMetadata:
      type: object
      description: Meter metadata object (full dataset).
      properties:
        meteringPoint:
          $ref: '#/components/schemas/meterCommonUpdate'
        meterLocation:
          $ref: '#/components/schemas/meteringPointLocation'
        electricityCharacteristics:
          $ref: '#/components/schemas/updateElectricityCharacteristics'
        naturalGasCharacteristics:
          $ref: '#/components/schemas/updateNaturalGasCharacteristics'
        aggregatorCharacteristics:
          $ref: '#/components/schemas/updateAggregatorCharacteristics'
      required:
        - meteringPoint
    createMeteringPointMetadata:
      type: object
      description: Meter metadata object (full dataset).
      properties:
        meteringPoint:
          $ref: '#/components/schemas/meterCommon'
        meterLocation:
          $ref: '#/components/schemas/meteringPointLocation'
        electricityCharacteristics:
          $ref: '#/components/schemas/createElectricityCharacteristics'
        naturalGasCharacteristics:
          $ref: '#/components/schemas/createNaturalGasCharacteristics'
        aggregatorCharacteristics:
          $ref: '#/components/schemas/createAggregatorCharacteristics'
      required:
        - meteringPoint
        - meterLocation
    meterAttributes:
      type: object
      description: >-
        Meter metadata object (full dataset). The following validation needs to be implemented manually. At least one of the
        meterAttributes properties are required in the request.
      properties:
        meterCommon:
          $ref: '#/components/schemas/meterCommonAttributes'
        electricityCharacteristics:
          $ref: '#/components/schemas/electricityCharacteristicsAttributes'
        naturalGasCharacteristics:
          $ref: '#/components/schemas/gasCharacteristicsAttributes'
        aggregatorCharacteristics:
          $ref: '#/components/schemas/aggregatorCharacteristicsAttributes'
        meterLocation:
          $ref: '#/components/schemas/meterLocation'
        customerEic:
          $ref: '#/components/schemas/eic'
    meterMetadataResponse:
      type: object
      description: >-
        Meter metadata object (full dataset). All of the following meterMetadataResponse properties are required in the response:
          - location
          - meterCommon
        The following validation needs to be implemented manually. Exactly one of the meterMetadataResponse properties are required in the response:
          - electricityCharacteristics
          - naturalGasCharacteristics
          - aggregatorCharacteristics
      properties:
        meteringPoint:
          $ref: '#/components/schemas/meterCommonResponse'
        location:
          $ref: '#/components/schemas/meteringPointLocation'
        electricityCharacteristics:
          $ref: '#/components/schemas/electricityCharacteristics'
        naturalGasCharacteristics:
          $ref: '#/components/schemas/naturalGasCharacteristics'
        aggregatorCharacteristics:
          $ref: '#/components/schemas/aggregatorCharacteristics'
        customerEic:
          $ref: '#/components/schemas/eic'
      required:
        - meteringPoint
        - location
    meteringPoint:
      type: object
      properties:
        meterMetadata:
          $ref: '#/components/schemas/getMeterMetadata'
        gridOperator:
          $ref: '#/components/schemas/gridOperator'
      required:
        - getMeterMetadata
    meteringPointEntityResponse:
      type: object
      properties:
        meteringPoint:
          $ref: '#/components/schemas/meteringPointAttributes'
        meterLocation:
          $ref: '#/components/schemas/meteringPointLocation'
        electricityCharacteristics:
          $ref: '#/components/schemas/electricityCharacteristics'
        naturalGasCharacteristics:
          $ref: '#/components/schemas/naturalGasCharacteristics'
        aggregatorCharacteristics:
          $ref: '#/components/schemas/aggregatorCharacteristics'
    marketParticipantContext:
      type: object
      properties:
        marketParticipantIdentification:
          $ref: '#/components/schemas/eic'
        marketParticipantRole:
          $ref: '#/components/schemas/serviceProviderRole'
        commodityType:
          $ref: '#/components/schemas/commodityType'
      required:
        - marketParticipantIdentification
        - marketParticipantRole
        - commodityType
    pagingRequest:
      type: object
      description: Pagination controls
      properties:
        page:
          type: integer
          minimum: 0
        pageSize:
          type: integer
          minimum: 1
      required:
        - page
        - pageSize
    pagingResponse:
      type: object
      description: Pagination controls
      properties:
        page:
          type: integer
          minimum: 0
        totalPages:
          type: integer
          minimum: 1
    badRequest:
      type: object
      description: Bad Request
      properties:
        problem:
          $ref: '#/components/schemas/defaultProblem'
    unauthorized:
      type: object
      description: Unauthorized
      properties:
        problem:
          $ref: '#/components/schemas/defaultProblem'
    forbidden:
      type: object
      description: Forbidden
      properties:
        problem:
          $ref: '#/components/schemas/defaultProblem'
    notFound:
      type: object
      description: Not found
      properties:
        problem:
          $ref: '#/components/schemas/defaultProblem'
    unprocessableEntity:
      type: object
      description: Unprocessable entity
      properties:
        problem:
          $ref: '#/components/schemas/defaultProblem'
    defaultProblem:
      type: object
      description: Default problem object
      properties:
        code:
          type: string
        message:
          type: string
        cause:
          $ref: '#/components/schemas/defaultProblem'
  responses:
    badRequest:
      description: Bad Request
      headers:
        status:
          description: HTTP status code
          schema:
            $ref: '#/components/schemas/statusCode'
        x-document-date-time:
          description: Document creation timestamp
          schema:
            $ref: '#/components/schemas/dateTime'
        x-document-identification:
          description: Document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
        x-original-document-identification:
          description: Request document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/badRequest'
    unauthorized:
      description: Unauthorized
      headers:
        status:
          description: HTTP status code
          schema:
            $ref: '#/components/schemas/statusCode'
        x-document-date-time:
          description: Document creation timestamp
          schema:
            $ref: '#/components/schemas/dateTime'
        x-document-identification:
          description: Document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
        x-original-document-identification:
          description: Request document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/unauthorized'
    forbidden:
      description: Forbidden
      headers:
        status:
          description: HTTP status code
          schema:
            $ref: '#/components/schemas/statusCode'
        x-document-date-time:
          description: Document creation timestamp
          schema:
            $ref: '#/components/schemas/dateTime'
        x-document-identification:
          description: Document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
        x-original-document-identification:
          description: Request document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/forbidden'
    notFound:
      description: Not found
      headers:
        status:
          description: HTTP status code
          schema:
            $ref: '#/components/schemas/statusCode'
        x-document-date-time:
          description: Document creation timestamp
          schema:
            $ref: '#/components/schemas/dateTime'
        x-document-identification:
          description: Document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
        x-original-document-identification:
          description: Request document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/notFound'
    unprocessableEntity:
      description: Unprocessable entity
      headers:
        status:
          description: HTTP status code
          schema:
            $ref: '#/components/schemas/statusCode'
        x-document-date-time:
          description: Document creation timestamp
          schema:
            $ref: '#/components/schemas/dateTime'
        x-document-identification:
          description: Document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
        x-original-document-identification:
          description: Request document unique identification
          schema:
            $ref: '#/components/schemas/uniqueId'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/unprocessableEntity'
servers:
  - url: https://test-datahub.elering.ee
security:
  - JWTAuth: [ ]
